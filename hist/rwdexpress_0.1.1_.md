# Documentation for the `RWDExpress` package.
  
----------------------------------------------------------------
 
 *RWD Express Package* 
  
----------------------------------------------------------------
 
### Version information:
  
- Package: RWDExpress
- Version: 0.1.1
- Generated: 2025-09-22T22:10:52
- Author(s): T.Narusawa(t.narusawa.i@gmail.com)
- Maintainer(s): T.Narusawa(t.narusawa.i@gmail.com)
- License: MIT
- File SHA256: `F*434AF407A7AD43493CF531672EE37E20379AA503832EE9F7EFECD0EC832FC6BE` for this version
- Content SHA256: `C*F27989705B4784B8AAEF154EA2FA21F6B17E0BACAC1BE0072BC91F13A7A1FD81` for this version
  
---
 
# The `RWDExpress` package, version: `0.1.1`;
  
---
 
### RWDExpress ###
 
This is a package to support data handling on big data like Real World Data.
When working with Real World data, long execution times are a real headache. The package allows us to use SAS Indexes, which can significantly speed up data extraction. SAS indexes have been implemented within a macro here and easily used by programmers who are not familier with it. The package comes with other handy macros which programmers may want to use when handling RWD.
 
list of macros:  
- `%index_single_key()`  
- `%small_world()`  
- `%split_world()`
  
---
 
  
---
 
Required SAS Components: 
  - Base SAS Software
  
---
 
 
--------------------------------------------------------------------
 
*SAS package generated by SAS Package Framework, version `20250729`*
 
--------------------------------------------------------------------
 
# The `RWDExpress` package content
The `RWDExpress` package consists of the following content:
 
1. [`%index_single_key()` macro ](#indexsinglekey-macros-1 )
2. [`%small_world()` macro ](#smallworld-macros-2 )
3. [`%split_world()` macro ](#splitworld-macros-3 )
  
 
4. [License note](#license)
  
---
 
## `%index_single_key()` macro <a name="indexsinglekey-macros-1"></a> ######

`%index_single_key` is a macro that creates an index for datasets in a library all at once. The index key should be a single variable, such as `patientid`, that exists in all target datasets. 

### Parameters
  - `inlib`  :  Library reference containing the original datasets.
  - `outlib` :   Library reference where output datasets with index data to be stored
  - `indexkey`: index key variable for all datasets.e.g: patientid	
  - `in_ds(optional)` : datasets to be extracted. e.g: AE CM DM 		
  - `ex_ds(optional)` : datasets to be excluded. e.g: XX XY XS 	   
  - `ds_select_cond(optional)` : Condition to extract datasets.
				Note that condition to extract the datasets from output of proc contents.
							e.g: index(memname,"D_")
### Sample code
create single index for variable patid on all datasets in rwd library and store them in rwdx
~~~sas
%index_single_key(inlib=rwd, outlib=rwdx, indexkey=patid);
~~~
You can specify the target datasets using the optional parameter in_ds or ex_ds.
~~~sas
%index_single_key(inlib=rwd, outlib=rwdx, indexkey=patid, in_ds = DISEASE DRUG);
%index_single_key(inlib=rwd, outlib=rwdx, indexkey=patid, ex_ds = MASTER_DRUG);
~~~
You can specify the target datasets using condition using the optional parameterds_select_cond.
~~~sas
%index_single_key(inlib=rwd, outlib=rwdx, indexkey=patid, in_ds = index(memname,"MASTER_")=0);
~~~

### Note:
This macro creates a single index key to all datasets, supporting streamlined patient data extraction. Remember, only one key variable should be specified, typically the patient ID.
---

  
---
 
## `%small_world()` macro <a name="smallworld-macros-2"></a> ######

`%small_world` is a macro to extract data with subjects in subject_level_ds using WHERE expression. Optionally, the number of subjects can be specify to extract smaller number of subjects from large size datasets.

### Parameters
 - `inlib`  :  libname where original datasets are located. dataset with index is preferable
 - `outlib`:  libname output datasets extracted with specific subjects to be stored
 - `subject_level_ds`: subject level dataset e.g: work.DM, inds.ADSL 
 - `subject_id_var`: variable with subject / patient id. e.g: usubjid patientid
 - `no_sub` : Number of subjects you would like to extract. If this parameter is blank, all subjects in subject_level_ds is extracted
 - `ds_select_cond(optional)`: Condition to extract datasets.
				Note that condition to extract the datasets from output of proc contents.
							e.g: index(memname,"D_")
### Sample code

Extract subjects in PATIENT from datasets in library rwd and store them in library out

~~~sas
%small_world(inlib=rwd, outlib=out, 
	     subject_level_ds=PATIENT, 
	     subject_id_var=patid);
~~~

Use this macro with %index_single_key to shorten execution time for extraction.
Extract first 1000 subjects in rwdx.PATIENT from datasets in rwdx then store them in swd.
~~~sas
%index_single_key(inlib=rwd, outlib=rwdx, indexkey=patid);
%small_world(inlib=rwdx, outlib=swd, 
	     subject_level_ds=rwdx.PATIENT, 
	     subject_id_var=patid, no_sub=1000);
~~~

### Note:
If the original datasets have index of subject_id_var, the macro can extract dataset extlemely fast.

---

  
---
 
## `%split_world()` macro <a name="splitworld-macros-3"></a> ######

`%split_world` is a macro which allow user to split the large dataset in to small piecies. so that user can process one by one.

### Parameters
 - `inlib`  :  libname where target dataset are located.
 - `indata` :  target dataset e.g: act
 - `outlib(defaul to work)` :  libname split datasets (e.g: act001,act002...) to be stored
nperBlock : the number of records split dataset will have in one dataset
 - `blockstart(defaul to 1)` : the start of block. It starts from the first block if not specified.
 - `blockend` : the end of blok, if not specified, it ends with the last block if not specified.
### Sample code

Split disease dataset in rwd into small datasets with 100000 observations.

~~~sas
%split_world(inlib=rwd, indata=disease, nperBlock=100000);
~~~

Split disease dataset in rwd into small datasets with 100000 observations.
You can specify which datasets you want and store them in the library split.
~~~sas
* from 3rd dataset to 5th datasets;
%split_world(inlib=rwd, indata=d02_actdata, outlib=split, nperBlock=100000, blockstart=3, blockend=5);
* from 6th to the end;
%split_world(inlib=rwd, indata=d02_actdata, outlib=split, nperBlock=100000, blockstart=6);

~~~
`%split_world` is a macro 

### Parameters
 - `inlib`  :  libname where target dataset are located.
 - `indata` :  target dataset e.g: act
 - `outlib(defaul to work)` :  libname split datasets (e.g: act001,act002...) to be stored
nperBlock : the number of records split dataset will have in one dataset
 - `blockstart(defaul to 1)` : the start of block. It starts from the first block if not specified.
 - `blockend` : the end of blok, if not specified, it ends with the last block if not specified.
### Sample code

Split disease dataset in rwd into small datasets with 100000 observations.

~~~sas
%split_world(inlib=rwd, indata=disease, nperBlock=100000);
~~~

Split disease dataset in rwd into small datasets with 100000 observations.
You can specify which datasets you want and store them in the library split.
~~~sas
* from 3rd dataset to 5th datasets;
%split_world(inlib=rwd, indata=d02_actdata, outlib=split, nperBlock=100000, blockstart=3, blockend=5);
* from 6th to the end;
%split_world(inlib=rwd, indata=d02_actdata, outlib=split, nperBlock=100000, blockstart=6);

~~~


### Note:

---

  
---
 
  
---
 
# License <a name="license"></a> ######
 
	Copyright (c) 2025 T.Narusawa

  Permission is hereby granted, free of charge, to any person obtaining a copy  
  of this software and associated documentation files (the "Software"), to deal 
  in the Software without restriction, including without limitation the rights  
  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell     
  copies of the Software, and to permit persons to whom the Software is         
  furnished to do so, subject to the following conditions:                      
                                                                                
  The above copyright notice and this permission notice shall be included       
  in all copies or substantial portions of the Software.                        
                                                                                
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR    
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,      
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE   
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER        
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, 
  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE 
  SOFTWARE.
  
---
 
